import {
  require_react_dom,
  require_scheduler
} from "./chunk-AHRRKAAW.js";
import {
  require_react
} from "./chunk-QMO7TV7R.js";
import {
  __toESM
} from "./chunk-ZS7NZCD4.js";

// node_modules/use-context-selector/dist/index.modern.js
var import_react = __toESM(require_react());
var import_scheduler = __toESM(require_scheduler());
var import_react_dom = __toESM(require_react_dom());
var d = Symbol();
var f = Symbol();
var v = "undefined" == typeof window || /ServerSideRendering/.test(window.navigator && window.navigator.userAgent) ? import_react.useEffect : import_react.useLayoutEffect;
var a = import_scheduler.unstable_runWithPriority ? (e2) => (0, import_scheduler.unstable_runWithPriority)(import_scheduler.unstable_NormalPriority, e2) : (e2) => e2();
var w = (e2) => e2;
function E(r2) {
  const t2 = (0, import_react.createContext)({ [d]: { v: { current: r2 }, n: { current: -1 }, l: /* @__PURE__ */ new Set(), u: (e2) => e2() } });
  var o2;
  return t2[f] = t2.Provider, t2.Provider = (o2 = t2.Provider, ({ value: e2, children: r3 }) => {
    const t3 = (0, import_react.useRef)(e2), c2 = (0, import_react.useRef)(0), [i2, p2] = (0, import_react.useState)(null);
    i2 && (i2(e2), p2(null));
    const f2 = (0, import_react.useRef)();
    if (!f2.current) {
      const e3 = /* @__PURE__ */ new Set(), r4 = (r5, t4) => {
        (0, import_react_dom.unstable_batchedUpdates)(() => {
          c2.current += 1;
          const n2 = { n: c2.current };
          null != t4 && t4.suspense && (n2.n *= -1, n2.p = new Promise((e4) => {
            p2(() => (r6) => {
              n2.v = r6, delete n2.p, e4(r6);
            });
          })), e3.forEach((e4) => e4(n2)), r5();
        });
      };
      f2.current = { [d]: { v: t3, n: c2, l: e3, u: r4 } };
    }
    return v(() => {
      t3.current = e2, c2.current += 1, a(() => {
        f2.current[d].l.forEach((r4) => {
          r4({ n: c2.current, v: e2 });
        });
      });
    }, [e2]), (0, import_react.createElement)(o2, { value: f2.current }, r3);
  }), delete t2.Consumer, t2;
}
function h(e2, n2) {
  const o2 = (0, import_react.useContext)(e2)[d];
  if ("object" == typeof process && true && !o2)
    throw new Error("useContextSelector requires special context");
  const { v: { current: c2 }, n: { current: u2 }, l: s2 } = o2, i2 = n2(c2), [p2, l2] = (0, import_react.useReducer)((e3, r2) => {
    if (!r2)
      return [c2, i2];
    if ("p" in r2)
      throw r2.p;
    if (r2.n === u2)
      return Object.is(e3[1], i2) ? e3 : [c2, i2];
    try {
      if ("v" in r2) {
        if (Object.is(e3[0], r2.v))
          return e3;
        const t2 = n2(r2.v);
        return Object.is(e3[1], t2) ? e3 : [r2.v, t2];
      }
    } catch (e4) {
    }
    return [...e3];
  }, [c2, i2]);
  return Object.is(p2[1], i2) || l2(), v(() => (s2.add(l2), () => {
    s2.delete(l2);
  }), [s2]), p2[1];
}
function m(e2) {
  return h(e2, w);
}
function b(e2) {
  const t2 = (0, import_react.useContext)(e2)[d];
  if ("object" == typeof process && true && !t2)
    throw new Error("useContextUpdate requires special context");
  const { u: n2 } = t2;
  return n2;
}
var x = ({ context: e2, value: r2, children: t2 }) => {
  const { [f]: o2 } = e2;
  if ("object" == typeof process && true && !o2)
    throw new Error("BridgeProvider requires special context");
  return (0, import_react.createElement)(o2, { value: r2 }, t2);
};
var j = (e2) => {
  const t2 = (0, import_react.useContext)(e2);
  if ("object" == typeof process && true && !t2[d])
    throw new Error("useBridgeValue requires special context");
  return t2;
};
export {
  x as BridgeProvider,
  E as createContext,
  j as useBridgeValue,
  m as useContext,
  h as useContextSelector,
  b as useContextUpdate
};
//# sourceMappingURL=use-context-selector.js.map
